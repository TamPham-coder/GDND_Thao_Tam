<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω h√≥a ƒë∆°n - KTX VƒÉn Lang</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="hoadon_style.css">
</head>
<body>

    <div class="app-container">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="img/logoVLU.png" alt="VLU Logo" class="vlu-logo">
            </div>
            <nav class="sidebar-menu">
                <ul>
                    <li>
                        <a href="tongquan_index.html"><i class="fa-solid fa-house"></i> T·ªïng quan</a>
                    </li>
                    <li>
                        <a href="hosocanhan_index.html"><i class="fa-solid fa-clipboard-user"></i> H·ªì s∆° c√° nh√¢n</a>
                    </li>
                    <li>
                        <a href="quanlydon_index.html"><i class="fa-solid fa-file-pen"></i> Qu·∫£n l√Ω ƒë∆°n</a>
                    </li>
                    <li>
                        <a href="thongbao_index.html"><i class="fa-regular fa-bell"></i> Th√¥ng b√°o</a>
                    </li>
                    <li class="active">
                        <a href="hoadon_index.html"><i class="fa-solid fa-hand-holding-dollar"></i> H√≥a ƒë∆°n & Ph√≠</a>
                    </li>
                       <li>
                        <a href="dangnhap_index.html"><i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <div class="main-panel">
            <header class="top-header">
                <div class="header-left">
                    <button class="menu-toggle"></button>
                    <h1 class="page-title">K√Ω T√∫c X√° Tr∆∞·ªùng ƒë·∫°i h·ªçc VƒÉn Lang</h1>
                </div>
                <div class="user-info">
                    <div class="user-text">
                        <span class="user-name">H·ªì Th·ªã Ph∆∞∆°ng Th·∫£o - 71K29CNTT03</span>
                        <span class="user-role">Sinh vi√™n</span>
                    </div>
                    <div class="user-avatar">
                        <i class="fa-solid fa-user"></i>
                    </div>
                </div>
            </header>

            <div class="content-body">
                <div class="card">
                    <h2 class="card-title">Qu·∫£n l√Ω h√≥a ƒë∆°n</h2>

                    <div class="filters-row">
                        <div class="filter-item">
                            <label>Tr·∫°ng th√°i</label>
                            <select>
                                <option>T·∫•t c·∫£</option>
                                <option>ƒê√£ thanh to√°n</option>
                                <option>Ch∆∞a thanh to√°n</option>
                            </select>
                        </div>
                        <div class="filter-item search-group">
                            <label>Th√°ng</label>
                            <div class="input-with-icon">
                                <input type="text" placeholder="-- Ch·ªçn th√°ng --">
                                <i class="fa-regular fa-calendar"></i>
                            </div>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="invoice-table">
                            <thead>
                                <tr>
                                    <th>M√É Hƒê</th>
                                    <th>PH√íNG</th>
                                    <th>TH√ÅNG</th>
                                    <th>T·ªîNG TI·ªÄN</th>
                                    <th>H·∫†N THANH TO√ÅN</th>
                                    <th>TR·∫†NG TH√ÅI</th>
                                    <th>THAO T√ÅC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>01</strong></td>
                                    <td>
                                        <div class="room-info">
                                            <strong>I504</strong>
                                            <span>T√≤a I</span>
                                        </div>
                                    </td>
                                    <td><strong>10/2024</strong></td>
                                    <td class="money">900.000 ‚Ç´</td>
                                    <td>15/11/2024</td>
                                    <td>
                                        <span class="badge badge-overdue">
                                            <span class="dot red"></span> Qu√° h·∫°n 365 ng√†y
                                        </span>
                                    </td>
                                    <td>
                                        <button class="btn-action btn-pay">Thanh to√°n</button>
                                    </td>
                                </tr>

                                <tr>
                                    <td><strong>02</strong></td>
                                    <td>
                                        <div class="room-info">
                                            <strong>I504</strong>
                                            <span>T√≤a I</span>
                                        </div>
                                    </td>
                                    <td><strong>09/2024</strong></td>
                                    <td class="money">893.000 ‚Ç´</td>
                                    <td>15/10/2025</td>
                                    <td>
                                        <span class="badge badge-paid">
                                            <i class="fa-solid fa-check"></i> ƒê√£ thanh to√°n
                                        </span>
                                    </td>
                                    <td>
                                        <button class="btn-action btn-detail">Chi ti·∫øt</button>
                                    </td>
                                </tr>

                                <tr>
                                    <td><strong>03</strong></td>
                                    <td>
                                        <div class="room-info">
                                            <strong>I504</strong>
                                            <span>T√≤a I</span>
                                        </div>
                                    </td>
                                    <td><strong>11/2025</strong></td>
                                    <td class="money">1.633.632 ‚Ç´</td>
                                    <td>31/12/2025</td>
                                    <td>
                                        <span class="badge badge-pending">
                                            <i class="fa-solid fa-hourglass-half"></i> C√≤n 49 ng√†y
                                        </span>
                                    </td>
                                    <td>
                                        <button class="btn-action btn-pay">Thanh to√°n</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
<div id="paymentModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal('paymentModal')">&times;</span>
        <h3>üí∞ Thanh to√°n H√≥a ƒë∆°n #<span id="invoiceIdPayment"></span></h3>
        <p>T·ªïng ti·ªÅn c·∫ßn thanh to√°n: <strong id="totalAmountPayment"></strong></p>
        
        <label for="bankSelect">Ch·ªçn Ng√¢n h√†ng:</label>
        <select id="bankSelect">
            <option value="vcb">Vietcombank</option>
            <option value="tcb">Techcombank</option>
            <option value="momo">Momo</option>
            <option value="zalo">ZaloPay</option>
        </select>
        
        <button class="btn-action btn-pay full-width-btn" style="margin-top: 15px;">Th·ª±c hi·ªán Thanh to√°n</button>
    </div>
</div>

<div id="detailModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal('detailModal')">&times;</span>
        <h3>üìë Chi ti·∫øt H√≥a ƒë∆°n #<span id="invoiceIdDetail"></span></h3>
        
        <div id="invoiceDetailsContent">
            </div>

        <button class="btn-action btn-detail full-width-btn" onclick="closeModal('detailModal')" style="margin-top: 15px;">ƒê√≥ng</button>
    </div>
</div>
<script>
    // H√†m m·ªü Modal
    function openModal(modalId) {
        document.getElementById(modalId).style.display = "block";
    }

    // H√†m ƒë√≥ng Modal
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
    }

    // ƒê√≥ng Modal khi click ra ngo√†i
    window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = "none";
        }
    }

    // G√°n s·ª± ki·ªán cho c√°c n√∫t Thanh to√°n v√† Chi ti·∫øt
    document.addEventListener('DOMContentLoaded', function() {
        const tableBody = document.querySelector('.invoice-table tbody');

        tableBody.addEventListener('click', function(e) {
            
            // 1. X·ª≠ l√Ω n√∫t THANH TO√ÅN
            if (e.target.classList.contains('btn-pay')) {
                const row = e.target.closest('tr');
                // L·∫•y d·ªØ li·ªáu t·ª´ c√°c c·ªôt
                const invoiceId = row.children[0].textContent.trim(); // M√£ Hƒê
                const totalAmount = row.children[3].textContent.trim(); // T·ªïng ti·ªÅn
                
                // C·∫≠p nh·∫≠t n·ªôi dung modal Thanh to√°n
                document.getElementById('invoiceIdPayment').textContent = invoiceId;
                document.getElementById('totalAmountPayment').textContent = totalAmount;

                // M·ªü modal
                openModal('paymentModal');
            } 
            
            // 2. X·ª≠ l√Ω n√∫t CHI TI·∫æT
            else if (e.target.classList.contains('btn-detail')) {
                const row = e.target.closest('tr');
                
                // L·∫•y d·ªØ li·ªáu t·ª´ c√°c c·ªôt
                const invoiceId = row.children[0].textContent.trim();
                const roomName = row.querySelector('.room-info strong').textContent.trim();
                const roomBuilding = row.querySelector('.room-info span').textContent.trim();
                const month = row.children[2].textContent.trim();
                const totalAmount = row.children[3].textContent.trim();
                const paymentDate = row.children[4].textContent.trim(); 
                const status = row.querySelector('.badge-paid').textContent.trim();

                // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ modal Chi ti·∫øt
                document.getElementById('invoiceIdDetail').textContent = invoiceId;

                // T·∫°o n·ªôi dung chi ti·∫øt
                const detailContent = `
                    <div class="detail-item">
                        <span>Ph√≤ng/T√≤a:</span>
                        <strong>${roomName} (${roomBuilding})</strong>
                    </div>
                    <div class="detail-item">
                        <span>Th√°ng:</span>
                        <strong>${month}</strong>
                    </div>
                    <div class="detail-item">
                        <span>T·ªïng ti·ªÅn:</span>
                        <strong class="money">${totalAmount}</strong>
                    </div>
                    <div class="detail-item">
                        <span>Tr·∫°ng th√°i:</span>
                        <strong>${status}</strong>
                    </div>
                    <div class="detail-item">
                        <span>Ng√†y thanh to√°n:</span>
                        <strong>${paymentDate}</strong>
                    </div>
                `;

                // Ch√®n n·ªôi dung v√†o modal
                document.getElementById('invoiceDetailsContent').innerHTML = detailContent;

                // M·ªü modal
                openModal('detailModal');
            }
        });
    });
</script>
</body>
</html>