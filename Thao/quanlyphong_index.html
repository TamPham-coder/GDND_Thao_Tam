<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý phòng - KTX Văn Lang</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="quanlyphong_style.css">
</head>
<body>

    <div class="app-container">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="img/logoVLU.png" alt="VLU Logo" class="vlu-logo">
            </div>
            <nav class="sidebar-menu">
                <ul>
                    <li>
                        <a href="tongquan_nhanvienphong_index.html"><i class="fa-solid fa-house"></i> Tổng quan (Phòng)</a>
                    </li>
                    <li class="active">
                        <a href="quanlyphong_index.html"><i class="fa-solid fa-door-open"></i> Quản lý phòng</a>
                    </li>
                    <li>
                        <a href="xetduyetdon_index.html"><i class="fa-solid fa-file-signature"></i> Xét duyệt đơn</a>
                    </li>
                    <li>
                        <a href="dexuatduyet_index.html"><i class="fa-solid fa-file-export"></i> Đà xuất duyệt hồ sơ</a>
                    </li>
                    <li>
                        <a href="baocaophong_index.html"><i class="fa-solid fa-chart-line"></i> Báo cáo (Phòng)</a>
                        <li><a href="dangnhap_index.html"><i class="fa-solid fa-right-from-bracket"></i> Đăng xuất </a></li>
                    </li>
                </ul>
            </nav>
        </aside>

        <div class="main-panel">
            <header class="top-header">
                <div class="header-left">
                    <button class="menu-toggle"><i class="fa-solid fa-bars"></i></button>
                    <h1 class="page-title">Ký Túc Xá Trường đại học Văn Lang</h1>
                </div>
                <div class="user-info">
                    <span class="user-name">Trần Minh Huy - 71K29CNTT04</span>
                    <span class="user-role">Sinh viên</span>
                    <div class="user-avatar"><i class="fa-solid fa-user"></i></div>
                </div>
            </header>

            <div class="content-body">
                
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="card-img">
                            <img src="https://img.freepik.com/free-photo/accounting-concept-with-calculator_23-2147836271.jpg" alt="Tổng số phòng">
                        </div>
                        <div class="card-text">
                            <h3>Tổng số phòng</h3>
                            <div class="stat-number">4</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="card-img">
                            <img src="https://img.freepik.com/free-photo/close-up-hands-holding-money_23-2148866314.jpg" alt="Doanh thu">
                        </div>
                        <div class="card-text">
                            <h3>Doanh thu</h3>
                            <div class="stat-number">85.000.000 ₫</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="card-img">
                            <img src="https://img.freepik.com/free-vector/contactless-payment-concept-illustration_114360-3048.jpg" alt="Chưa thu">
                        </div>
                        <div class="card-text">
                            <h3>Chưa thu</h3>
                            <div class="stat-number">0 ₫</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="card-img">
                            <img src="https://img.freepik.com/free-vector/credit-card-payment-concept-illustration_114360-174.jpg" alt="Quá hạn">
                        </div>
                        <div class="card-text">
                            <h3>Quá hạn</h3>
                            <div class="stat-number">0 ₫</div>
                        </div>
                    </div>
                </div>

                <div class="management-section">
                    <div class="section-header">
                        <h2 class="section-title">Quản lý phòng</h2>
                        <button onclick="openAssignModal()" class="btn-add-room">+ Xếp phòng</button>
                    </div>

                    <div class="filter-bar">
                        <div class="filter-group">
                            <label>Tòa nhà</label>
                            <select>
                                <option value="">-- Tất cả --</option>
                                    <option value="">Tòa I_CS3</option>
                                    <option value="">160/63A-B Phan Huy Ích, Gò Vấp</option>
                                </optgroup>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label>Trạng thái</label>
                            <select>
                                <option value="">-- Tất cả --</option>
                                    <option value="">Phòng còn trống</option>
                                    <option value="">Đang bảo trì</option>
                                    <option value="">Phòng đã đầy</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="filter-group search-group">
                            <label>Tìm kiếm</label>
                            <input type="text" placeholder="Tìm tên phòng...">
                        </div>
                    </div>

                    <div class="room-grid">
                        
                        <div class="room-card">
                            <div class="room-header">
                                <div class="room-info">
                                    <h4>Tòa A - Tầng 1</h4>
                                    <span>Phòng A: 001</span>
                                </div>
                                <button class="btn-detail">Xem chi tiết</button>
                            </div>
                            <div class="room-stats">
                                <span>Số lượng</span>
                                <span class="count">2/4</span>
                            </div>
                            <div class="room-price">
                                20.000.000 ₫ <span class="unit">/tháng</span>
                            </div>
                            <button class="btn-add-student">Thêm sinh viên</button>
                        </div>

                        <div class="room-card">
                            <div class="room-header">
                                <div class="room-info">
                                    <h4>Tòa B - Tầng 1</h4>
                                    <span>Phòng B: 001</span>
                                </div>
                                <button class="btn-detail">Xem chi tiết</button>
                            </div>
                            <div class="room-stats">
                                <span>Số lượng</span>
                                <span class="count">1/4</span>
                            </div>
                            <div class="room-price">
                                15.000.000 ₫ <span class="unit">/tháng</span>
                            </div>
                            <button class="btn-add-student">Thêm sinh viên</button>
                        </div>

                        <div class="room-card">
                            <div class="room-header">
                                <div class="room-info">
                                    <h4>Tòa B - Tầng 2</h4>
                                    <span>Phòng B: 002</span>
                                </div>
                                <button class="btn-detail">Xem chi tiết</button>
                            </div>
                            <div class="room-stats">
                                <span>Số lượng</span>
                                <span class="count">2/4</span>
                            </div>
                            <div class="room-price">
                                15.000.000 ₫ <span class="unit">/tháng</span>
                            </div>
                            <button class="btn-add-student">Thêm sinh viên</button>
                        </div>

                        <div class="room-card">
                            <div class="room-header">
                                <div class="room-info">
                                    <h4>Tòa C - Tầng 1</h4>
                                    <span>Phòng C: 001</span>
                                </div>
                                <button class="btn-detail">Xem chi tiết</button>
                            </div>
                            <div class="room-stats">
                                <span>Số lượng</span>
                                <span class="count">0/4</span>
                            </div>
                            <div class="room-price">
                                10.000.000 ₫ <span class="unit">/tháng</span>
                            </div>
                            <button class="btn-add-student">Thêm sinh viên</button>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
<!-- POPUP CHI TIẾT PHÒNG -->
<div id="roomModal" class="modal-overlay">
    <div class="modal-box">
        <button class="close-modal">&times;</button>

        <h2 class="room-title">Phòng A101</h2>
        <p class="room-subtitle">Tòa A - Tầng 1 <span class="badge">Còn 2 chỗ</span></p>

        <hr>

        <div class="modal-content">

            <div class="info-left">
                <h3><i class="fa-solid fa-circle-info"></i> Thông tin phòng</h3>
                <p><strong>Loại phòng:</strong> 4 người</p>
                <p><strong>Giới tính:</strong> Nữ</p>
                <p><strong>Diện tích:</strong> N/A m²</p>
                <p><strong>Giá thuê:</strong> 20.000.000 đ/tháng</p>
                <p><strong>Lấp đầy:</strong> 2/4 (50%)</p>
            </div>

            <div class="info-right">
                <h3><i class="fa-solid fa-wrench"></i> Tiện nghi</h3>
                <div class="tags">
                    <span class="tag red">Máy lạnh</span>
                    <span class="tag red">Tủ lạnh</span>
                    <span class="tag red">Nóng lạnh</span>
                    <span class="tag">Wifi</span>
                </div>
                <p><strong>Mô tả:</strong><br>Phòng rộng rãi, thoáng mát</p>
            </div>

        </div>

        <h3 class="student-title">Danh sách sinh viên</h3>

        <button class="btn-add-stu-modal">+ Xếp thêm sinh viên</button>

        <div class="student-list">
            <div class="student-item">
                <div class="s-info">
                    <b>Hồ Thị Phương Thảo</b>
                    <p>MSSV: SV001 | SDT: 0901234570</p>
                </div>
                <div class="s-btns">
                    <button class="btn-detail-stu">Chi tiết</button>
                    <button class="btn-delete-stu">Xóa</button>
                </div>
            </div>

            <div class="student-item">
                <div class="s-info">
                    <b>Trần Minh Quân</b>
                    <p>MSSV: SV002 | SDT: 0901234571</p>
                </div>
                <div class="s-btns">
                    <button class="btn-detail-stu">Chi tiết</button>
                    <button class="btn-delete-stu">Xóa</button>
                </div>
            </div>
        </div>

        <div class="footer-btns">
            <button class="btn-edit">Sửa thông tin</button>
            <button class="btn-maintain">Bảo trì</button>
            <button class="btn-close">Đóng</button>
            <button class="btn-save">Lưu</button>
        </div>

    </div>
</div>
<!-- Nút mở popup -->
<button onclick="openAssignModal()">+ Xếp thêm sinh viên</button>

<!-- Modal -->
<div id="assignRoomModal" class="modal-overlay">
    <div class="modal-box">

        <button class="close-btn" onclick="closeAssignModal()">&times;</button>

        <h2>Xếp phòng</h2>

        <!-- CHỌN SINH VIÊN -->
        <label>Chọn sinh viên</label>
        <select id="studentSelect" onchange="displayStudentInfo()">
            <option value="">-- Chọn sinh viên --</option>
            <option value="1">#0001 – 2374802010190 – Trần Minh Huy</option>
            <option value="2">#0002 – 2374802010322 – Mai Văn Nam</option>
        </select>

        <!-- DANH SÁCH HIỆN THÔNG TIN -->
        <div id="studentInfo" class="info-box" style="display:none;">
            <div id="renderInfo"></div>
        </div>

        <!-- CHỌN PHÒNG -->
        <label>Chọn phòng</label>
        <select id="roomSelect">
            <option value="">-- Chọn phòng --</option>
            <option>A101 - Tòa A</option>
            <option>A102 - Tòa A</option>
            <option>B201 - Tòa B</option>
        </select>

        <!-- GHI CHÚ -->
        <label>Ghi chú</label>
        <textarea id="noteArea" placeholder="Ghi chú xếp phòng..."></textarea>

        <!-- BUTTON -->
        <div class="btn-group">
            <button class="btn-cancel" onclick="closeAssignModal()">Hủy</button>
            <button class="btn-confirm" onclick="confirmAssign()">Xác nhận xếp phòng</button>
        </div>
    </div>
</div>

<script>
// Mở popup khi bấm "Xem chi tiết"
document.querySelectorAll(".btn-detail").forEach(btn => {
    btn.addEventListener("click", () => {
        document.getElementById("roomModal").style.display = "flex";
        document.body.style.overflow = "hidden";
    });
});

// Đóng popup
document.querySelector(".close-modal").onclick =
document.querySelector(".btn-close").onclick = function () {
    document.getElementById("roomModal").style.display = "none";
    document.body.style.overflow = "auto";
};
function openAssignModal() {
    document.getElementById("assignRoomModal").style.display = "flex";
}

function closeAssignModal() {
    document.getElementById("assignRoomModal").style.display = "none";
}

const students = {
    1: {
        id: "#0001",
        cmnd: "2374802010190",
        name: "Trần Minh Huy"
    },
    2: {
        id: "#0002",
        cmnd: "2374802010322",
        name: "Mai Văn Nam"
    }
};

function displayStudentInfo() {
    const value = document.getElementById("studentSelect").value;

    if (value === "") {
        document.getElementById("studentInfo").style.display = "none";
        return;
    }

    const st = students[value];

    document.getElementById("renderInfo").innerHTML = `
        <div class="student-item"><b>${st.id}</b> <span>${st.cmnd}</span> <span>${st.name}</span></div>
    `;

    document.getElementById("studentInfo").style.display = "block";
}

function confirmAssign() {
    const st = document.getElementById("studentSelect").value;
    const room = document.getElementById("roomSelect").value;
    const note = document.getElementById("noteArea").value;

    if (!st || !room) {
        alert("Vui lòng chọn sinh viên và phòng!");
        return;
    }

    const info = students[st];

    alert(
        `XẾP PHÒNG THÀNH CÔNG!\n\n` +
        `Sinh viên: ${info.name} (${info.id})\n` +
        `Phòng: ${room}\n` +
        `Ghi chú: ${note || "(Không có)"}`
    );

    closeAssignModal();
}

</script>

</body>
</html>